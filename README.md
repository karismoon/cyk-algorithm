# Cocke-Younger-Kasami (CYK) Algorithm

## Overview

The Cocke-Younger-Kasami (CYK) algorithm is a dynamic programming method used to determine whether a given string belongs to the language generated by a context-free grammar (CFG) in Chomsky Normal Form (CNF). The algorithm works by systematically constructing a table that represents possible derivations of substrings of the input string from non-terminals in the CFG.

## Chomsky Normal Form Conversion

### Overview

Before applying the CYK algorithm, the CFG must be in CNF. 

For the CFG to be in CNF, all production rules must one of of the following forms:

1. Two non-terminals
2. One terminal
3. Start symbol allowed only if the start symbol can generate the empty string.

### Steps

**1. Augment the Grammar**

Add a new start symbol  and a rule , where  is the original start symbol. This ensures that the start symbol never appears on the right-hand side of any production.

Example:
```
Before:
  S -> AB | ε

After:
  S0 -> S
  S -> AB | ε
```

**2. Eliminate Epsilon-Productions**

Remove all productions of the form , except for the start symbol if necessary. Update other productions to account for nullable variables.

Example:
```
Before:
  S -> AB | ε
  A -> a | ε

After:
  S -> AB | B | A
  A -> a
```

**3. Eliminate Unit Productions**

Remove unit productions of the form , where both  and  are non-terminals, and replace them with the productions of .

Example:
```
Before:
  S -> A
  A -> a

After:
  S -> a
```

**4. Remove Mixed Productions**

Replace productions where terminals and non-terminals appear together (e.g., ) with new non-terminals for the terminals.

Example:
```
Before:
  S -> ABc

After:
  S -> ABT
  T -> c
```

**5. Enforce Binary Productions**

Convert rules with more than two non-terminals on the right-hand side into binary productions using new non-terminals.

Example:
```
Before:
  S -> ABC

After:
  S -> ABT
  T -> C
```

## Cocke-Younger-Kasami (CYK) Algorithm

## CYK Algorithm Implementation

### Overview

The Cocke-Younger-Kasami (CYK) algorithm determines whether a given string belongs to a language generated by a context-free grammar (CFG) in Chomsky Normal Form (CNF). This implementation uses dynamic programming to process substrings of increasing length and track possible derivations.

### Steps

**1. Initialize CFG and Input String**

- Import the CFG and helper functions.
- Set the input string to be checked.
- Copy the CFG into `processed_symbols`, which will track derivations.

Example:
```
string = "baaba"

example_cfg = {
    "a": ["A", "C"],
    "b": ["B"],
    "AB": ["S", "C"],
    "BC": ["S"],
    "BA": ["A"],
    "CC": ["B"],
}
```

**2. Process Substrings**

- **For each substring length** from 2 to the length of the input string:
  - **For each possible substring** of the current length:
    - Split the substring into two parts in all possible ways.
    - For each split, find the origin non-terminals for both parts.
    - Compute possible combinations of the two parts using Cartesian product.
    - Identify which non-terminals produce these combinations using the CFG.
    - Update `processed_symbols` with new derivations for the current substring.

Example:
```
1. Process substrings of length 2:
   - Substring "ba" is split as ["b", "a"].
   - Identify origin non-terminals for "b" and "a" (e.g., B and A).
   - Compute the Cartesian product of [B] and [A] to get BA.
   - Find non-terminals that produce BA and update `processed_symbols` if necessary.

2. Repeat for substrings of lengths 3, 4, and 5, following the same logic.
```

**3. Check for Derivability**

- Check if the entire input string can be derived using the start symbol of the CFG.

**Final Check:**
- If the input string is present in `processed_symbols` under the start symbol, it belongs to the language generated by the CFG.

**Example Output**

```
row 1
substring: ba
split: ['b', 'a']
split first part origin: ['B']
split second part origin: ['A']
products: ['BA']
initial symbols: ['S']
processed dict updated: {'A': ['S'], 'B': ['S'], 'AB': ['S'], 'ba': ['S']}

row 2
substring: baa
split: ['b', 'aa']
split first part origin: ['B']
split second part origin: []
products: []

FINAL ANSWER: baaba is not in the given CFG.
```

### Notes

- Ensure the CFG is in CNF before running the CYK algorithm.
- The algorithm processes substrings in a bottom-up manner, starting from the smallest and building to the full string.
- `processed_symbols` tracks which non-terminals can derive which substrings, allowing for efficient lookups and updates.

## Conclusion

The CYK algorithm, coupled with the conversion of CFGs into Chomsky Normal Form, provides a robust method for determining membership in context-free languages. By leveraging a dynamic programming approach, the algorithm systematically constructs derivations for substrings, ensuring both efficiency and clarity.